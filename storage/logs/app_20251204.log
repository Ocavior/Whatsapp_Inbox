{"timestamp": "2025-12-04T14:14:52.668791", "level": "INFO", "logger": "whatsapp_business", "message": "\ud83d\ude80 WhatsApp Business API starting up...", "module": "main", "function": "lifespan", "line": 17}
{"timestamp": "2025-12-04T14:14:57.011416", "level": "INFO", "logger": "whatsapp_business", "message": "\u2705 Database connected successfully", "module": "main", "function": "lifespan", "line": 22}
{"timestamp": "2025-12-04T14:15:53.786079", "level": "ERROR", "logger": "whatsapp_business", "message": "Validation error: [{'type': 'value_error', 'loc': ('body', 'message_template'), 'msg': 'Value error, Message template must contain {name} placeholder', 'input': 'string', 'ctx': {'error': ValueError('Message template must contain {name} placeholder')}}]", "module": "main", "function": "validation_exception_handler", "line": 59}
{"timestamp": "2025-12-04T14:15:53.802943", "level": "ERROR", "logger": "whatsapp_business", "message": "Unhandled error: Object of type ValueError is not JSON serializable", "module": "main", "function": "general_exception_handler", "line": 68, "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\fastapi\\routing.py\", line 111, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\fastapi\\routing.py\", line 432, in app\n    raise validation_error\nfastapi.exceptions.RequestValidationError: [{'type': 'value_error', 'loc': ('body', 'message_template'), 'msg': 'Value error, Message template must contain {name} placeholder', 'input': 'string', 'ctx': {'error': ValueError('Message template must contain {name} placeholder')}}]\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\fastapi\\routing.py\", line 125, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 59, in wrapped_app\n    response = await handler(conn, exc)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\app\\main.py\", line 60, in validation_exception_handler\n    return JSONResponse(\n           ^^^^^^^^^^^^^\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\starlette\\responses.py\", line 189, in __init__\n    super().__init__(content, status_code, headers, media_type, background)\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\starlette\\responses.py\", line 46, in __init__\n    self.body = self.render(content)\n                ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\kumar\\OneDrive\\Desktop\\bulk_send\\.venv\\Lib\\site-packages\\starlette\\responses.py\", line 192, in render\n    return json.dumps(\n           ^^^^^^^^^^^\n  File \"C:\\Users\\kumar\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\json\\__init__.py\", line 238, in dumps\n    **kw).encode(obj)\n          ^^^^^^^^^^^\n  File \"C:\\Users\\kumar\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\kumar\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\json\\encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\kumar\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type ValueError is not JSON serializable"}
{"timestamp": "2025-12-04T14:21:36.103915", "level": "INFO", "logger": "whatsapp_business", "message": "\ud83d\udc4b WhatsApp Business API shutting down...", "module": "main", "function": "lifespan", "line": 34}
{"timestamp": "2025-12-04T14:21:39.621201", "level": "INFO", "logger": "whatsapp_business", "message": "\ud83d\ude80 WhatsApp Business API starting up...", "module": "main", "function": "lifespan", "line": 17}
{"timestamp": "2025-12-04T14:21:40.559446", "level": "INFO", "logger": "whatsapp_business", "message": "\u2705 Database connected successfully", "module": "main", "function": "lifespan", "line": 22}
{"timestamp": "2025-12-04T14:21:50.608262", "level": "ERROR", "logger": "whatsapp_business", "message": "Validation error: [{'type': 'value_error', 'loc': ('body', 'message_template'), 'msg': 'Value error, Message template must contain {name} placeholder', 'input': 'string', 'ctx': {'error': ValueError('Message template must contain {name} placeholder')}}]", "module": "main", "function": "validation_exception_handler", "line": 59}
{"timestamp": "2025-12-04T14:29:34.001038", "level": "INFO", "logger": "whatsapp_business", "message": "\ud83d\udc4b WhatsApp Business API shutting down...", "module": "main", "function": "lifespan", "line": 32}
{"timestamp": "2025-12-04T14:29:37.350721", "level": "INFO", "logger": "whatsapp_business", "message": "\ud83d\ude80 WhatsApp Business API starting up...", "module": "main", "function": "lifespan", "line": 17}
{"timestamp": "2025-12-04T14:29:39.449031", "level": "INFO", "logger": "whatsapp_business", "message": "\u2705 Database connected successfully", "module": "main", "function": "lifespan", "line": 22}
{"timestamp": "2025-12-04T14:30:48.703640", "level": "INFO", "logger": "whatsapp_business", "message": "\ud83d\udc4b WhatsApp Business API shutting down...", "module": "main", "function": "lifespan", "line": 32}
{"timestamp": "2025-12-04T14:30:51.347198", "level": "INFO", "logger": "whatsapp_business", "message": "\ud83d\ude80 WhatsApp Business API starting up...", "module": "main", "function": "lifespan", "line": 17}
{"timestamp": "2025-12-04T14:30:52.478558", "level": "INFO", "logger": "whatsapp_business", "message": "\u2705 Database connected successfully", "module": "main", "function": "lifespan", "line": 22}
{"timestamp": "2025-12-04T14:31:40.555607", "level": "INFO", "logger": "whatsapp_business", "message": "Bulk send request: 1 contacts", "module": "bulk_send", "function": "send_bulk_messages", "line": 117}
{"timestamp": "2025-12-04T14:31:40.556846", "level": "INFO", "logger": "whatsapp_business", "message": "Starting bulk send: 1 contacts", "module": "bulk_sender", "function": "send_bulk_messages", "line": 37}
{"timestamp": "2025-12-04T14:31:40.556846", "level": "INFO", "logger": "whatsapp_business", "message": "Sending to 919137347128 (1/1)", "module": "bulk_sender", "function": "send_bulk_messages", "line": 62}
{"timestamp": "2025-12-04T14:31:42.114888", "level": "ERROR", "logger": "whatsapp_business", "message": "API error 190: Error validating access token: Session has expired on Wednesday, 19-Nov-25 07:00:00 PST. The current time is Thursday, 04-Dec-25 06:31:19 PST.", "module": "whatsapp", "function": "_make_request", "line": 180}
{"timestamp": "2025-12-04T14:31:42.225269", "level": "ERROR", "logger": "whatsapp_business", "message": "\u274c Failed: 919137347128 - Error validating access token: Session has expired on Wednesday, 19-Nov-25 07:00:00 PST. The current time is Thursday, 04-Dec-25 06:31:19 PST.", "module": "bulk_sender", "function": "send_bulk_messages", "line": 108}
{"timestamp": "2025-12-04T14:31:42.225269", "level": "INFO", "logger": "whatsapp_business", "message": "Bulk send completed: 0/1 successful (0.0%)", "module": "bulk_sender", "function": "send_bulk_messages", "line": 125}
{"timestamp": "2025-12-04T14:32:10.001618", "level": "INFO", "logger": "whatsapp_business", "message": "\ud83d\udc4b WhatsApp Business API shutting down...", "module": "main", "function": "lifespan", "line": 32}
